import requests
import re  # Import the regex module to remove HTML tags

def get_traffic_info(api_key, path):
    # Define the endpoint and parameters for traffic information
    endpoint = "https://roads.googleapis.com/v1/snapToRoads"
    params = {
        "path": path,
        "interpolate": "true",
        "key": api_key
    }
    
    # Make the request
    response = requests.get(endpoint, params=params)
    if response.status_code == 200:
        data = response.json()
        if "snappedPoints" in data:
            return data["snappedPoints"]
        else:
            return "No traffic data is available."
    else:
        return f"HTTP error: {response.status_code}"
def get_directions(api_key, origin, destination):
    # Define the endpoint and parameters
    endpoint = "https://maps.googleapis.com/maps/api/directions/json"
    params = {
        "origin": origin,
        "destination": destination,
        "mode": "driving",
        "key": api_key
    }
    
    # Make the request
    response = requests.get(endpoint, params=params)
    if response.status_code == 200:
        data = response.json()
        if data['status'] == "OK":
            steps = data['routes'][0]['legs'][0]['steps']
            directions = []
            for step in steps:
                # Remove HTML tags from the instructions
                clean_instruction = re.sub(r'<[^>]+>', '', step['html_instructions'])
                directions.append(clean_instruction)
            return directions
        else:
            return f"Error: {data['status']}"
    else:
        return f"HTTP error: {response.status_code}"

import os

if __name__ == "__main__":
    # Load the Google Maps API key from an environment variable
    API_KEY = 'AIzaSyADLZbllg9LIbNpsReyeAtwuEzKXJImpig'
    if not API_KEY:
        raise ValueError("API key not found. Please set the 'GOOGLE_MAPS_API_KEY' environment variable.")
    
    # Define origin and destination
    origin = "61 Innerbelt Road, Somerville, MA"
    destination = "40 Holy Lane, Holliston, MA"
    
    # Get and print directions
    directions = get_directions(API_KEY, origin, destination)
    if isinstance(directions, list):
        for idx, direction in enumerate(directions, start=1):
            print(f"{idx}. {direction}")
    else:
        print(directions if isinstance(directions, str) else " ".join(directions))
        