import requests

def fetch_stock_market_news(api_key, query="stock market", language="en", page_size=10):
    url = "https://newsapi.org/v2/everything"
    params = {
        "q": query,
        "language": language,
        "pageSize": page_size,
        "apiKey": api_key
    }
    
    response = requests.get(url, params=params)
    
    if response.status_code == 200:
        data = response.json()
        articles = data.get("articles", [])
        return articles
    else:
        print(f"Error: Unable to fetch news (Status Code: {response.status_code})")
        return []

def display_news(articles):
    if not articles:
        print("No articles found.")
        return
    
    for idx, article in enumerate(articles, start=1):
        print(f"{idx}. {article['title']}")
        print(f"   Source: {article['source']['name']}")
        print(f"   Published At: {article['publishedAt']}")
        print(f"   URL: {article['url']}")
        print()

if __name__ == "__main__":
    # Replace 'your_api_key_here' with your actual NewsAPI key
    api_key = "9f37170722f04a1abb96957252b093d1"
    news_articles = fetch_stock_market_news(api_key)
    display_news(news_articles)